<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../static/dashboard.css">
</head>

<body>

  <!-- Toggle Button (3 dots) -->
 <div class="d-md-none position-fixed top-0 start-0 p-2" style="z-index:1050;">
    <button class="btn btn-outline-secondary" id="toggleSidebar">☰</button>
</div>

  <div class="container-fluid mt-4">
    <div class="row">
      <!-- Sidebar -->
      <div class="sidebar-container col-md-3" id="sidebarWrapper">
            <div class="list-group">
                <a class="list-group-item list-group-item-action sidebar-link active" data-target="profile">Profile Overview</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="preferences">Job Preferences</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="skills">Skills & Qualifications</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="experience">Work Experience</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="documents">Resume & Documents</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="applications">Job Application History</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="saved">Saved Jobs</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="notifications">Notifications & Alerts</a>
                <a class="list-group-item list-group-item-action sidebar-link" data-target="settings">Account Settings</a>
                <a class="list-group-item list-group-item-action sidebar-link text-danger" href="/logout">Logout</a>
            </div>
        </div>

      <!-- Main Content -->
      <div class="col-md-9 mt-4 mt-md-0">

            <!-- Profile Overview -->
            <div id="profile" class="section-content active card mb-4">
                <div class="card-header text-center">Profile Overview</div>
                <div class="card-body d-flex flex-column align-items-center">

                    <!-- Profile Image -->
                    <div class="mb-4 text-center">
                        <img src="/static/images/default-profile.png" alt="Profile Picture" class="rounded-circle" width="120" height="120">
                        <div class="mt-2">
                            <input type="file" class="form-control form-control-sm mx-auto" style="max-width: 250px;" />
                        </div>
                    </div>

                    <!-- Full Name -->
                    <div class="mb-3" style="width: 100%; max-width: 350px;">
                        <label for="fullName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="fullName" placeholder="Name" value="{{ user.username }}" readonly>
                    </div>

                    <!-- Email -->
                    <div class="mb-3" style="width: 100%; max-width: 350px;">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" value="{{ user.email }}" readonly>
                    </div>

                    <!-- Phone Number -->
                    <div class="mb-3" style="width: 100%; max-width: 350px;">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phone" placeholder="+91 XXXXX XXXXX" value="{{ profile.phone }}">
                    </div>

                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('profile')">Save</button>
                </div>
            </div>



            <!-- Job Preferences -->
            <div id="preferences" class="section-content card mb-4">
                <div class="card-header">Job Preferences</div>
                <div class="card-body row">
                    <div class="col-md-4">
                        <label>Desired Job Titles</label>
                        <input type="text" class="form-control" placeholder="e.g., Software Engineer" 
                            id="desired_titles" value="{{ preferences.titles}}">
                    </div>
                    <div class="col-md-4">
                        <label>Preferred Locations</label>
                        <input type="text" class="form-control" placeholder="Remote, Bengaluru" 
                            id="preferred_locations" value="{{ preferences.locations}}">
                    </div>
                    <div class="col-md-4">
                        <label>Salary Range</label>
                        <input type="text" class="form-control" placeholder="₹5,00,000 - ₹10,00,000"
                            id="salary_range" value="{{ preferences.salary_range}}">
                    </div>
                    <div class="col-md-6 mt-2">
                        <label>Employment Type</label>
                        <select class="form-control" id="employment_type">
                            <option value="Full-time" {% if preferences.employment_type == 'Full-time' %}selected{% endif %}>Full-time</option>
                            <option value="Part-time" {% if preferences.employment_type == 'Part-time' %}selected{% endif %}>Part-time</option>
                            <option value="Internship" {% if preferences.employment_type == 'Internship' %}selected{% endif %}>Internship</option>
                            <option value="Freelance" {% if preferences.employment_type == 'Freelance' %}selected{% endif %}>Freelance</option>
                        </select>
                    </div>
                    <div class="col-md-6 mt-2">
                        <label>Willing to Relocate/Remote</label>
                        <select class="form-control" id="willing_to_relocate">
                            <option value="Yes" {% if preferences.relocate == 'Yes' %}selected{% endif %}>Yes</option>
                            <option value="No" {% if preferences.relocate == 'No' %}selected{% endif %}>No</option>
                        </select>
                    </div>
                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('preferences')">Save</button>
                </div>
            </div>


            <!-- Skills & Qualifications -->
            <div id="skills" class="section-content card mb-4">
                <div class="card-header">Skills & Qualifications</div>
                <div class="card-body">

                    <!-- Skills -->
                    <label>Skills</label>
                    <input type="text" class="form-control mb-3" name="skills" value="{{ skills }}">

                    <!-- Certifications -->
                    <label>Certifications</label>
                    <input type="file" class="form-control mb-3" name="certification[]" multiple>
                    {% if certifications %}
                        <ul class="list-unstyled">
                            {% for file in certifications %}
                                <li>
                                    <a href="{{ url_for('static', filename=file) }}" target="_blank">
                                        {{ file.split('/')[-1] }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}

                    <!-- Languages -->
                    <label>Languages</label>
                    <input type="text" class="form-control mb-4" name="languages" value="{{ languages }}">

                    <!-- Education -->
                    <div id="education-section">
                        <label>Education</label>
                        {% for edu in qualifications %}
                        <div class="education-entry border p-3 mb-3 rounded">
                            <div class="row g-2">
                                <div class="col-md-6">
                                    <label>School/College Name</label>
                                    <input type="text" class="form-control" name="school" value="{{ edu.institution }}">
                                </div>
                                <div class="col-md-3">
                                    <label>Start Date</label>
                                    <input type="date" class="form-control" name="start_date" value="{{ edu.start_date }}">
                                </div>
                                <div class="col-md-3">
                                    <label>End Date</label>
                                    <input type="date" class="form-control" name="end_date" value="{{ edu.end_date }}">
                                </div>
                                <div class="col-md-6">
                                    <label>Highest Qualification</label>
                                    <input type="text" class="form-control" name="qualification" value="{{ edu.qualification }}">
                                </div>
                                <div class="col-md-3">
                                    <label>Percentage/CGPA</label>
                                    <input type="text" class="form-control" name="percentage" value="{{ edu.cgpa }}">
                                </div>
                                <div class="col-md-3">
                                    <label>City</label>
                                    <input type="text" class="form-control" name="city" value="{{ edu.city }}">
                                </div>
                                <div class="col-md-3">
                                    <label>State</label>
                                    <input type="text" class="form-control" name="state" value="{{ edu.state }}">
                                </div>
                                <div class="col-md-3">
                                    <label>Country</label>
                                    <input type="text" class="form-control" name="country" value="{{ edu.country }}">
                                </div>
                            </div>
                        </div>
                        {% endfor %}

                        {% if not qualifications %}
                        <!-- Empty template for new users -->
                        <div class="education-entry border p-3 mb-3 rounded bg-light">
                            <div class="row g-2">
                                <div class="col-md-6">
                                    <label>School/College Name</label>
                                    <input type="text" class="form-control" name="school">
                                </div>
                                <div class="col-md-3">
                                    <label>Start Date</label>
                                    <input type="date" class="form-control" name="start_date">
                                </div>
                                <div class="col-md-3">
                                    <label>End Date</label>
                                    <input type="date" class="form-control" name="end_date">
                                </div>
                                <div class="col-md-6">
                                    <label>Highest Qualification</label>
                                    <input type="text" class="form-control" name="qualification">
                                </div>
                                <div class="col-md-3">
                                    <label>Percentage/CGPA</label>
                                    <input type="text" class="form-control" name="percentage">
                                </div>
                                <div class="col-md-3">
                                    <label>City</label>
                                    <input type="text" class="form-control" name="city">
                                </div>
                                <div class="col-md-3">
                                    <label>State</label>
                                    <input type="text" class="form-control" name="state">
                                </div>
                                <div class="col-md-3">
                                    <label>Country</label>
                                    <input type="text" class="form-control" name="country">
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Add More Education Button -->
                    <button type="button" class="btn btn-outline-primary" onclick="addSection('education-section', '.education-entry')">+ Add Another Education</button>
                    <button class="btn btn-success" onclick="saveSection('skills')">Save</button>
                </div>
            </div>



            <!-- Work Experience -->
            <div id="experience" class="section-content card mb-4">
                <div class="card-header">Work Experience</div>
                <div class="card-body">
                    <!-- Experience Entries Container -->
                    <div id="experience-section">
                        {% for exp in experience %}
                        <div class="experience-entry  p-3 mb-3 rounded">
                            <div class="mb-3">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-control" name="company" value="{{ exp.company }}">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Role/Title</label>
                                <input type="text" class="form-control" name="role" value="{{ exp.title }}">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Start Date</label>
                                    <input type="date" class="form-control" name="start_date" value="{{ exp.start_date }}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">End Date</label>
                                    <input type="date" class="form-control" name="end_date" value="{{ exp.end_date }}">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Description of Responsibilities</label>
                                <textarea class="form-control" name="description" rows="3">{{ exp.description }}</textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Technologies Used</label>
                                <input type="text" class="form-control" name="technologies" value="{{ exp.technologies }}">
                            </div>
                        </div>
                        {% endfor %}

                        {% if not experience %}
                        <!-- Initial empty entry for new users -->
                        <div class="experience-entry border p-3 mb-3 rounded bg-light">
                            <div class="mb-3">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-control" name="company">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Role/Title</label>
                                <input type="text" class="form-control" name="role">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Start Date</label>
                                    <input type="date" class="form-control" name="start_date">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">End Date</label>
                                    <input type="date" class="form-control" name="end_date">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Description of Responsibilities</label>
                                <textarea class="form-control" name="description" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Technologies Used</label>
                                <input type="text" class="form-control" name="technologies">
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Add / Save Buttons -->
                    <button type="button" class="btn btn-outline-primary" onclick="addSection('experience-section', '.experience-entry')">+ Add Another Experience</button>
                    <button class="btn btn-success" onclick="saveSection('experience')">Save</button>
                </div>
            </div>

            <!-- Resume & Documents Upload -->
            <div id="documents" class="section-content card mb-4">
                <div class="card-header">Resume & Documents</div>
                <div class="card-body">

                    <!-- Resume -->
                    <label>Resume</label>
                    {% if resume_file %}
                        <div class="mb-2">
                            <a href="{{ url_for('static', filename=resume_file) }}" target="_blank">
                                {{ resume_file.split('/')[-1] }}
                            </a>
                        </div>
                    {% endif %}
                    <input type="file" class="form-control mb-2" name="resume">

                    <!-- Other Documents -->
                    <label>Other Documents</label>
                    {% if other_files %}
                        <ul class="list-unstyled">
                            {% for file in other_files %}
                                <li>
                                    <a href="{{ url_for('static', filename=file) }}" target="_blank">
                                        {{ file.split('/')[-1] }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    <input type="file" class="form-control" name="documents[]" multiple>

                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('documents')">Save</button>
                </div>
            </div>



            <!-- Job Application History -->
            <div id="applications" class="section-content card mb-4">
                <div class="card-header">Job Application History</div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item">Software Engineer @ ABC Corp - Applied on 2025-07-25 - Status: Interview Scheduled</li>
                    </ul>
                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('applications')">Save</button>
                </div>
            </div>

            <!-- Saved Jobs -->
            <div id="saved" class="section-content card mb-4">
                <div class="card-header">Saved Jobs</div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Backend Developer @ XYZ Ltd
                            <button class="btn btn-danger btn-sm">Delete</button>
                        </li>
                    </ul>
                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('saved')">Save</button>
                </div>
            </div>

            <!-- Notifications & Alerts -->
            <div id="notifications" class="section-content card mb-4">
                <div class="card-header">Notifications & Alerts</div>
                <div class="card-body">
                    <label>Notification Frequency</label>
                    <select class="form-control">
                        <option value="Immediately" {{ 'selected' if profile.notification_frequency == 'Immediately' else '' }}>Immediately</option>
                        <option value="Daily" {{ 'selected' if profile.notification_frequency == 'Daily' else '' }}>Daily</option>
                        <option value="Weekly" {{ 'selected' if profile.notification_frequency == 'Weekly' else '' }}>Weekly</option>
                    </select>
                </div>
                <div class="text-end mt-3">
                    <button class="btn btn-success" onclick="saveSection('notifications')">Save</button>
                </div>
            </div>

            <!-- Account Settings -->
            <div id="settings" class="section-content card mb-4">
                <div class="card-header text-center">Account Settings</div>
                <div class="card-body d-flex flex-column align-items-center">

                    <!-- Change Password Section -->
                    <div class="password card mb-4" style="width: 100%; max-width: 500px;">
                        <div class="card-body">
                            <h5 class="card-title text-center mb-3">Change Password</h5>
                            <div class="mb-3">
                                <label for="currentPassword" class="form-label">Current Password</label>
                                <input type="password" class="form-control" id="currentPassword" placeholder="Enter current password">
                            </div>
                            <div class="mb-3">
                                <label for="newPassword" class="form-label">New Password</label>
                                <input type="password" class="form-control" id="newPassword" placeholder="Enter new password">
                            </div>
                            <div class="mb-3">
                                <label for="confirmPassword" class="form-label">Confirm New Password</label>
                                <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm new password">
                            </div>
                            <div class="text-center">
                                <button class="btn btn-success">Update Password</button>
                            </div>
                        </div>
                    </div>

                    <!-- Other Settings -->
                    <div class="d-flex flex-column align-items-center" style="width: 100%; max-width: 500px;">
                        <button class="btn btn-danger mb-3 w-100 deleteAccount">Delete Account</button>
                        <button class="btn btn-secondary w-100">Manage 2FA</button>
                    </div>
                </div>
            </div>


        </div>
    </div>
  </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

</body>
</html>
